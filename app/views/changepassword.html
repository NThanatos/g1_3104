<!-- Form used for updation of data into database -->
<form class="form-horizontal alert alert-warning" name="mmChangeForm" ng-submit="Changepassword(currentUser)">
    <h3 class="text-center">Change password</h3>
    <div class="form-group">
        <label>Old Password:</label>
        <input type="password" class="form-control" ng-model="currentUser.oldpassword" value="{{currentUser.oldpassword}}" required>
    </div>
    <div class="form-group">
        <label>New Password:</label>
        <input type="password" class="form-control" ng-model="currentUser.newpassword" ng-pattern="/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&])[A-Za-z\d$@$!%*?&]{7,}/" ng-minlength="7" name="newpsw" value="{{currentUser.newpassword}}" required>
    </div>
    <div ng-message="minlength">Passwords must be at least 7 characters.</div>
    <div ng-message="pattern"> Must contain one number &amp; one uppercase letter, and one symbol from $, %, !, *, ? </div><br>

    <div class="form-group">
        <button class="btn btn-success" ng-disabled="!mmChangeForm.$valid">Change password</button>
    </div>


</form>


<div class="col-md-6" ng-hide=(userData.role=="student")>
    <h3><span class="label label-info">2 Factor Authentication</span></h3>
    <md-switch ng-model="secret2fa" ng-change="togglesecret()"  aria-label="Switch 1">
        <span ng-show=secret2fa>On</span>
        <span ng-hide=secret2fa>Off</span>
    </md-switch>
</div>

<div class="container-fluid" ng-show=secret2fa>

    <div>
        <div class="row">

        </div>

        <div class="row">
            <div class="span8">

                <h2>Time-based One-time Password</h2>

                <p>Install Google Authenticator on your smartphone:<a href="http://itunes.apple.com/au/app/google-authenticator/id388497605?mt=8">iOS</a>, <a href="https://market.android.com/details?id=com.google.android.apps.authenticator&hl=en">Android</a>,
                    <a href="http://m.google.com/authenticator">Blackberry</a>. As the TOTP is an open standard you can
                    use this app to create one-time passwords for your own application. You add an account plus secret
                    by scanning a QR code (more info on the <a href="http://code.google.com/p/google-authenticator/wiki/KeyUriFormat">google code wiki</a>).
            </div>
        </div>
        <div class="row">


            <fieldset>
                <div class="clearfix">
                    <label for="secret">Secret Key of 16 characters</label>
                    <form ng-submit="mysubmit(secretkey)" ng-controller="loginCtrl">
                        Enter Secret Key and Save:
                        <div class="input">
                            <input type="text" size="30" name="secret" id="secret" class="xlarge" ng-model="secretkey" value=""/><span></span>
                            <input type="submit" id="submit" class="btn btn-primary" value="Save"/>
                        </div>

                    </form>
                </div>
                <br>
                <!-- /clearfix -->
                <div class="clearfix">
                    <label>QR Code</label>
                    <div class="input"><img id="qrImg" src=""/></div>
                </div>
                <!-- /clearfix -->
                <div class="clearfix">
                    <label>One-time Password</label>
                    <h4><div class="input"><span class="label label-primary" id='otp'></span></div></h4>
                </div>
                <!-- /clearfix -->
                <div class="clearfix">
                    <label>Updating in</label>
                    <div class="input"><span id='updatingIn'></span></div>
                </div>

            </fieldset>

        </div>
    </div>
</div>


